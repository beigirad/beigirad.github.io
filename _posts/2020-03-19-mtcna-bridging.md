---
layout: post
title: MTCNA - Bridging
category: notes
date: 2020-03-19T11:00:00
tags: mikrotik mtcna router-board routerOS bridging
comments: false
---
درباره مفهوم bridging و نحوه عملکردش
<!--break-->

در واقع یه forwarding لایه دوییه. (همونطور که routing یه forwarding لایه ۳یی عه) که مشخص میکنه فریم ها چطور به مقصد برسن. پس داره با آدرس فیزیکی MAC کار میکنه.

سویچ یه bridge چند پورته ست

توی routerOS میشه انواع اینترفیسارو bridge کرد

1. یک اینترفیس bridge ایجاد میکنیم. Interfaces > New bridge 
2. باید مشخص کنیم کدوم اینترفیسا میخوان به این bridge متصل شن: Bridge >  Ports و اینترفیسارو به بریج مورد نظر اضافه میکنیم

اگر همه اینترفیسارو اضافه کنیم از دید روتر و از لایه ۳ انگاری فقط یه اینترفیس داریم. و در واقع بقیه اینترفیسا slave این بریج هستن و اینترفیسا دیگه وجود خارجی ندارن.

کنار اینترفیسایی که به بریج متصلن یه حرف S میاد که به معنی slave هست. 

## مزایا
مانیتور و کنترل تک تک فریم ها و پورت ها و امکان توسعه فیچرهای نرم‌افزاری

## معایب
چون سویچینگ نرم‌افزاری انجام میشود میزان استفاده از CPU بالا میرود و سرعت ارسال پکت ها بهینه نیست

برای حل این موارد ماژول‌هایی به نام Switch Chip وجود داره و مختص اینکاره


## Service on Slave Interfaces
- بعضی سرویس ها بر روی یک اینترفیس ران میشن (نه کل روتر) مثل DHCP, Hotspot, PPPOE 
- این سرویسا روی اینترفیسای Slave ران نمیشن و فقط روی Master ها اجرا میشن

## Avoid possible loop
برای جلوگیری از routing loop از  پروتکل های STP یا RSTP استفاده میکنیم. این پروتکل ها درخت های پوشارو شناسایی میکنن و برخی لینکهارو غیرفعال میکنه (قطع نمیشه و به عنوان یدک نگه میداره) تا ترافیک ازشون عبور نکنه و loop هم از بین برن

موقع ایجاد کردن یک bridge توی تب STP یکی از گزینه ها به طور اتومات فعال هست(rstp)