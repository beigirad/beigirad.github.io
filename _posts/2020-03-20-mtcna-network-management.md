---
layout: post
title: MTCNA - Network Management
category: notes
date: 2020-03-20T11:00:00
tags: mikrotik mtcna router-board dhcp-client dhcp dhcp-server ARP
comments: false
---
توضیحات و کانفیگ کردن ARG و DHCP Client و DHCP Server
<!--break-->

## ARP: Address Resolution Protocol
مکانیزمی که آدرس لایه ۳ یی را به مک لایه ۲یی پیوند میدهد و از طریق جدولی این کارو انجام میده.

معمولا یک فرآیند داینامیک است اما در شرایط خاص و مسایل امنیتی میتونیم بصورت استاتیک هم کانفیگش کنیم

#### ARP mode
- Enabled در این حالت وقتی یه درخواست ARG میاد خودش بهش جواب میده و رکورد جدید رو هم ثبت میکنه
- Reply به درخواستا جواب میده ولی خود روتر هیچ سوالی نمیپرسه و چیزیم به جدول اضافه نمیشه
- Disabled توی این حالت نه درخواستارو جواب میده نه سوالی میپرسه نه چیزی ثبت میکنه. و همه چیو دستی ثبت میکنیم.
- Proxy ARP همه چی مثل مال Enabled عادی هست اما درخواستایی که از شبکه های دیگه هم میانو جواب میده

منظور از درخواست و سوال ARP Request است.

این منو توی IP > ARP در دسترسه که میتونیم جدول ARP رو ببینیم. یا رکورد جدیدی بهش اضافه کنیم.

نمونه جدول ARP:
```
$ arp -a
  Internet Address      Physical Address      Type
  173.16.1.254		00-0c-42-52-2e-cf    dynamic
  173.16.2.3		00-0c-42-52-2e-cf    dynamic
  173.16.2.2 		00-0c-42-52-2e-cf    dynamic

```
کنار اونایی که داینامیکن کنارشون یه D نوشته میشه. که میتونیم اونهارو تبدیل به استاتیک کنیم

برای تغییر ARP mode یک اینترفیس هم باید تو لیست اینترفیس ها و جزییات یک اینترفیس تب general آن را تغییر دهیم.


## DHCP client and server (Dynamic Host Configuration Protocol)
DHCP server در واقع سروری هست که این تنظیمات IP setting ارایه میکنه و شامل این آپشن هاست

- Address
- Net mask
- Default gateway
- DNS server بشرط پیاده سازی
- NTP servet بشرط پیاده سازی

DHCP client هم کلاینتی هست که آپشنهای زیرو دریافت میکنه
- Hostname
- ClientId (بشکل مک آدرس)

#### کانفیگ کردن DHCP Client
این کلاینت روی اینترفیس رو به اینترنت استفاده میشه.

توی برنامه IP > DHCP Client رو میتونیم تعریف کنیم. بعد از چند لحظه که دریافت IP انجام میشه 
- IP اختصاص داده شده به IP > Address List بصورت داینامیک اضافه میشه
- Route مربوطه به اون اینترفیس به لیست IP > Route اضافه میشه
- حتی توی IP > DNS هم بعنوان داینامیک سرور اضافه میشه
- حتی توی System > NTP client  هم اضافه میشه
همه موارد بالا با فلگ داینامیک اضافه میشن.


#### کانفیگ کردن DHCP Server
اگر میخوایم اینکارو انجام بدیم حتما باید اون اینترفیسی که روش سرور رو ران کنیم باید IP داشته باشه که توی pool خودش هم نباشه. و اگر اینطور نباشه کلا اون DHCP server غیرفعال خواهد بود

pool هم در واقع دامنه IP هاییه که قراره در اختیار کلاینتا قرار بگیره 

روی اینترفیسی که بریج هست نمیتونیم DHCP Server ران کنیم. DHCP Server باید روی اینترفیس بریج (master) ست بشه. اگر روی slave interface ست شه کار نخواهد کرد.

برای راحتی میتونیم از دکمه DHCP Setup بجای دکمه + استفاده کنیم که 
- خودش چندتا pool میسازه
- خودش نتورک لازم رو تعریف میکنه (تب Network توی IP > DHCP Server)

توی تب Lease میتونیم کسایی که IP گرفتن رو ببینیم

میتونیم هرکدوم رو استاتیک هم کنیم که دیگه یه IP ثابت رو به یه مک بده. کلا کارای مسخره بازی زیادی میشه باش انجام داد

Lease time هم مدت اعتبار اون IP هست